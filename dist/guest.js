(()=>{var x=(()=>{let o=null,r=null,l=0,i=0,d=!0,t=null,a=()=>{l+=1},m=()=>`(${i}/${l}) [${parseInt(i/l*100).toFixed(0)}%]`;return{init:()=>{o=document.getElementById("progress-info"),r=document.getElementById("progress-bar"),o.classList.remove("d-none"),t=new Promise(n=>document.addEventListener("undangan.progress.invalid",n))},add:a,invalid:n=>{d&&(d=!1,r.style.backgroundColor="red",o.innerText=`Error loading ${n} ${m()}`,document.dispatchEvent(new Event("undangan.progress.invalid")))},complete:(n,p=!1)=>{d&&(i+=1,o.innerText=`Loading ${n} ${p?"skipped":"complete"} ${m()}`,r.style.width=Math.min(i/l*100,100).toString()+"%",i===l&&(d=!1,t=null,document.dispatchEvent(new Event("undangan.progress.done"))))},getAbort:()=>t}})();var C=(()=>{let o='<span class="spinner-border spinner-border-sm my-0 ms-0 me-1 p-0" style="height: 0.8rem; width: 0.8rem;"></span>',r=[["*",'<strong class="text-theme-auto">$1</strong>'],["_",'<em class="text-theme-auto">$1</em>'],["~",'<del class="text-theme-auto">$1</del>'],["```",'<code class="font-monospace text-theme-auto">$1</code>']],l=[{type:"Mobile",regex:/Android.*Mobile|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i},{type:"Tablet",regex:/iPad|Android(?!.*Mobile)|Tablet/i},{type:"Desktop",regex:/Windows NT|Macintosh|Linux/i}],i=[{name:"Chrome",regex:/Chrome|CriOS/i},{name:"Safari",regex:/Safari/i},{name:"Edge",regex:/Edg|Edge/i},{name:"Firefox",regex:/Firefox|FxiOS/i},{name:"Opera",regex:/Opera|OPR/i},{name:"Internet Explorer",regex:/MSIE|Trident/i},{name:"Samsung Browser",regex:/SamsungBrowser/i}],d=[{name:"Windows",regex:/Windows NT ([\d.]+)/i},{name:"MacOS",regex:/Mac OS X ([\d_.]+)/i},{name:"Android",regex:/Android ([\d.]+)/i},{name:"iOS",regex:/OS ([\d_]+) like Mac OS X/i},{name:"Linux",regex:/Linux/i},{name:"Ubuntu",regex:/Ubuntu/i},{name:"Chrome OS",regex:/CrOS/i}],t=s=>String(s).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),a=s=>{let g=T=>{window.alert(`${T} ${s}`)};return{success:()=>g("\u{1F7E9}"),error:()=>g("\u{1F7E5}"),warning:()=>g("\u{1F7E8}"),info:()=>g("\u{1F7E6}"),custom:T=>g(T)}},m=s=>window.confirm(`\u{1F7E6} ${s}`),c=(s,g)=>(s.replaceChildren(document.createRange().createContextualFragment(g)),s),E=(s,g,T=.05)=>new Promise(v=>{let A=parseFloat(s.style.opacity),R=g?1:0,L=()=>{A+=g?T:-T,A=Math.max(0,Math.min(1,A)),s.style.opacity=A.toFixed(2),g&&A>=R||!g&&A<=R?(s.style.opacity=R.toString(),v(s)):requestAnimationFrame(L)};requestAnimationFrame(L)}),h=(s,g=0)=>{let T=null;T=setTimeout(()=>{s(),clearTimeout(T),T=null},g)};return{loader:o,ask:m,copy:async(s,g=null,T=1500)=>{let v=s.getAttribute("data-copy");if(!v||v.length===0){a("Nothing to copy").warning();return}s.disabled=!0;try{await navigator.clipboard.writeText(v)}catch{s.disabled=!1,a("Failed to copy").error();return}let A=s.innerHTML;c(s,g||'<i class="fa-solid fa-check"></i>'),h(()=>{s.disabled=!1,s.innerHTML=A},T)},notify:a,timeOut:h,debounce:(s,g=100)=>{let T=null;return(...v)=>{clearTimeout(T),T=setTimeout(()=>s(...v),g)}},escapeHtml:t,base64Encode:s=>{let T=new TextEncoder().encode(s);return window.btoa(String.fromCharCode(...T))},base64Decode:s=>{let g=new TextDecoder,T=Uint8Array.from(window.atob(s),v=>v.charCodeAt(0));return g.decode(T)},disableButton:(s,g="Loading",T=!1)=>{s.disabled=!0;let v=s.innerHTML;return c(s,T?g:o+g),{restore:(A=!1)=>{s.innerHTML=v,s.disabled=A}}},disableCheckbox:s=>{s.disabled=!0;let g=document.querySelector(`label[for="${s.id}"]`),T=g.innerHTML;return c(g,o+T),{restore:()=>{g.innerHTML=T,s.disabled=!1}}},safeInnerHTML:c,parseUserAgent:s=>{if(!s||typeof s!="string")return"Unknown";let g=l.find(L=>L.regex.test(s))?.type??"Unknown",T=i.find(L=>L.regex.test(s))?.name??"Unknown",v=d.find(L=>L.regex.test(s)),A=v?v.name:"Unknown",R=v?s.match(v.regex)?.[1]?.replace(/_/g,".")??null:null;return`${T} ${g} ${R?`${A} ${R}`:A}`},changeOpacity:E,getGMTOffset:s=>{let g=new Date,T=new Intl.DateTimeFormat("en-US",{timeZone:s,hourCycle:"h23",hour:"numeric"}),v=(parseInt(T.format(g))-g.getUTCHours()+24)%24;return v>12&&(v-=24),`GMT${v>=0?"+":""}${v}`},convertMarkdownToHTML:s=>(r.forEach(([g,T])=>{s=s.replace(new RegExp(`\\${g}(\\S(?:[\\s\\S]*?\\S)?)\\${g}`,"g"),T)}),s)}})();var U="POST";var $="AbortError",ne="TypeError",D={Accept:"application/json","Content-Type":"application/json"},N="request",B=(()=>{let o=null;return{getInstance:r=>{if(!o||!o.has(r))throw new Error(`please init cache first: ${r}`);return o.get(r)},restart:async r=>{o.set(r,null),o.delete(r),await window.caches.delete(r),await window.caches.open(r).then(l=>o.set(r,l))},init:(r,l=[])=>{if(!window.isSecureContext)throw new Error("this application required secure context");o=new Map,Promise.all(l.concat([N]).map(i=>window.caches.open(i).then(d=>o.set(i,d)))).then(()=>r())}}})(),F=o=>{let r=B.getInstance(o);return{set:(t,a,m,c)=>a.clone().arrayBuffer().then(E=>{if(!a.ok)return a;let h=new Date,e=new Headers(a.headers);if(e.has("Date")||e.set("Date",h.toUTCString()),m||!e.has("Cache-Control")){if(!m&&e.has("Expires")){let n=new Date(e.get("Expires"));c=Math.max(0,n.getTime()-h.getTime())}if(c===0)throw new Error("Cache max age cannot be 0");e.set("Cache-Control",`public, max-age=${Math.floor(c/1e3)}`)}return e.has("Content-Length")||e.set("Content-Length",String(E.byteLength)),r.put(t,new Response(E,{headers:e})).then(()=>a)}),has:t=>r.match(t).then(a=>{if(!a)return null;let m=a.headers.get("Cache-Control").match(/max-age=(\d+)/)[1],c=Date.parse(a.headers.get("Date"))+parseInt(m)*1e3;return Date.now()>c?null:a}),del:t=>r.delete(t)}},I=(o,r)=>{let l=new AbortController,i={signal:l.signal,credential:"include",headers:new Headers(D),method:String(o).toUpperCase()},d=0,t=0,a=0,m=0,c=!1,E=!1,h=null,e=null,n=null,p=u=>{let f=()=>{let b=()=>window.fetch(u,i).then(async s=>{if(c)return l.abort(),new Response(null,{status:s.status,statusText:s.statusText,headers:new Headers(s.headers)});if(!s.ok||!n)return s;let g=parseInt(s.headers.get("Content-Length")??0);if(g===0)return s;let T=[],v=0,A=s.body.getReader();for(;;){let{done:L,value:_}=await A.read();if(L)break;T.push(_),v+=_.length,await n(v,g,window.structuredClone?window.structuredClone(T):T)}let R=s.headers.get("Content-Type")??"application/octet-stream";return new Response(new Blob(T,{type:R}),{status:s.status,statusText:s.statusText,headers:new Headers(s.headers)})});if(d===0||c)return b();if(i.method!=="GET")return console.warn("Only method GET can be cached"),b();let S=F(N);return S.has(u).then(s=>s?Promise.resolve(s):S.del(u).then(b).then(g=>S.set(u,g,E,d)))};if(t===0||a===0)return f();let y=async()=>{try{return await f()}catch(b){if(b.name===$)throw b;if(a*=2,m++,m>t)throw new Error(`Max retries reached: ${b}`);return console.warn(`Retrying fetch (${m}/${t}): ${u.toString()}`),await new Promise(S=>window.setTimeout(S,a)),y()}};return y()},w=u=>{if(u.status!==200)return Promise.resolve(u);let f=document.querySelector("a[download]");f&&document.body.removeChild(f);let y=u.headers.get("Content-Disposition")?.match(/filename="(.+)"/)?.[1];return u.clone().blob().then(b=>{let S=document.createElement("a"),s=window.URL.createObjectURL(b);return S.href=s,S.download=y||`${e}.${h||(b.type.split("/")?.[1]??"bin")}`,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(s),u})};return{send(u=null){return e&&Object.keys(D).forEach(f=>i.headers.delete(f)),p(new URL(r,document.body.getAttribute("data-url"))).then(f=>e&&f.ok?w(f).then(y=>({code:y.status,data:y,error:null})):f.json().then(y=>{if(y.error){let b=y.error.at(0),S=f.status>=500;throw new Error(S?`ID: ${y.id}
\u{1F7E5} ${b}`:`\u{1F7E8} ${b}`)}return u&&(y.data=u(y.data)),Object.assign(y,{code:f.status})})).catch(f=>{if(f.name===$)return console.warn("Fetch aborted:",f),f;throw f.name===ne&&(f=new Error("\u{1F7E5} Network error or rate limit exceeded")),alert(f.message??String(f)),f})},withCache(u=1e3*60*60*6){return d=u,this},withForceCache(u=1e3*60*60*6){return E=!0,d===0&&(d=u),this},withNoBody(){return c=!0,this},withRetry(u=3,f=1e3){return t=u,a=f,this},withCancel(u){return u==null?this:((async()=>(await u,l.abort()))(),this)},withDownload(u,f=null){return e=u,h=f,this},withProgressFunc(u=null){return n=u,this},default(u=null){return i.headers=new Headers(u??{}),p(r).then(f=>e?w(f):Promise.resolve(f))},token(u){return u.split(".").length===3?(i.headers.append("Authorization","Bearer "+u),this):(i.headers.append("x-access-key",u),this)},body(u){if(i.method==="GET")throw new Error("GET method does not support body");return i.body=JSON.stringify(u),this}}};var O=o=>{let r=new Map,l=new Map,i=F(o),d=1e3*60*60*6,t=!1,a=(n,p)=>{if(!p.ok)throw new Error(p.statusText);return i.set(n,p,t,d)},m=n=>i.has(n),c=n=>i.del(n),E=(n,p=null)=>{if(r.has(n))return Promise.resolve(r.get(n));if(l.has(n))return l.get(n);let w=()=>I("GET",n).withCancel(p).withRetry().default(),u=m(n).then(f=>f?Promise.resolve(f):c(n).then(w).then(y=>a(n,y))).then(f=>f.blob()).then(f=>r.set(n,URL.createObjectURL(f))).then(()=>r.get(n)).finally(()=>l.delete(n));return l.set(n,u),u};return{run:(n,p=null)=>{let w=new Map;return n.length===0?Promise.resolve():(n.filter(u=>u!==null).forEach(u=>{let f=w.get(u.url)??[];w.set(u.url,[...f,[u.res,u?.rej]])}),Promise.allSettled(Array.from(w).map(([u,f])=>E(u,p).then(y=>(f.forEach(b=>b[0]?.(y)),y)).catch(y=>(f.forEach(b=>b[1]?.(y)),y)))))},del:c,has:m,set:a,get:E,open,download:async(n,p)=>{if(!new Map(Array.from(r.entries()).map(([u,f])=>[f,u])).has(n))try{if(!new URL(n).protocol.includes("blob"))throw new Error("Is not blob")}catch{n=await E(n)}return I("GET",n).withDownload(p).default()},setTtl(n){return d=Number(n),this},withForceCache(){return t=!0,this}}};var q=(()=>{let o=null,r=()=>{let i=document.getElementById("video-love-stroy");if(!i||!i.hasAttribute("data-src"))return i?.remove(),x.complete("video",!0),Promise.resolve();let d=i.getAttribute("data-src");if(!d)return x.complete("video",!0),Promise.resolve();let t=document.createElement("video");t.className=i.getAttribute("data-vid-class"),t.loop=!0,t.muted=!0,t.controls=!1,t.autoplay=!1,t.playsInline=!0,t.preload="metadata";let a=new IntersectionObserver(E=>E.forEach(h=>h.isIntersecting?t.play():t.pause())),m=E=>{t.preload="auto",t.controls=!0,t.disableRemotePlayback=!0,t.disablePictureInPicture=!0,t.controlsList="noremoteplayback nodownload noplaybackrate",t.src=URL.createObjectURL(E)},c=()=>{let E=document.getElementById("progress-bar-video-love-stroy"),h=document.getElementById("progress-info-video-love-stroy");return I("GET",d).withNoBody().default({Range:"bytes=0-1"}).then(e=>{if(e.status===200)return t.preload="none",t.src=C.escapeHtml(d),i.appendChild(t),Promise.resolve();if(e.status!==206)throw new Error("failed to fetch video");t.addEventListener("error",()=>x.invalid("video"));let n=new Promise(p=>t.addEventListener("loadedmetadata",p,{once:!0}));return t.src=C.escapeHtml(d),i.appendChild(t),n}).then(()=>{t.pause(),t.currentTime=0,x.complete("video");let e=t.getBoundingClientRect().width*(t.videoHeight/t.videoWidth);return t.style.height=`${e}px`,i.style.height=`${e}px`,I("GET",d).withRetry().withProgressFunc((n,p)=>{let w=Number(n/p*100).toFixed(0)+"%";E.style.width=w,h.innerText=w}).default()}).then(e=>e.clone().blob().then(n=>{let p=new Promise(w=>t.addEventListener("loadedmetadata",w,{once:!0}));return m(n),t.load(),p.then(()=>e)})).catch(e=>{E.style.backgroundColor="red",h.innerText="Error loading video",console.error(e)})};return o.has(d).then(E=>E?E.blob().then(h=>{let e=new Promise(n=>t.addEventListener("loadedmetadata",n,{once:!0}));return m(h),i.appendChild(t),e.then(()=>x.complete("video"))}):o.del(d).then(c).then(h=>o.set(d,h))).then(()=>{a.observe(t),t.style.removeProperty("height"),i.style.removeProperty("height"),document.getElementById("video-love-stroy-loading")?.remove()})};return{init:()=>(x.add(),o=O("video").withForceCache(),{load:r})}})();var j=(()=>{let o=null,r=null,l=[],i=e=>new Promise((n,p)=>{let w=new Image;w.onload=()=>n(w),w.onerror=p,w.src=e}),d=(e,n)=>i(n).then(p=>{e.width=p.naturalWidth,e.height=p.naturalHeight,e.classList.remove("opacity-0"),e.src=p.src,p.remove(),x.complete("image")}),t=e=>{l.push({url:e.getAttribute("data-src"),res:n=>d(e,n),rej:n=>{console.error(n),x.invalid("image")}})},a=e=>{e.onerror=()=>x.invalid("image"),e.onload=()=>{e.width=e.naturalWidth,e.height=e.naturalHeight,x.complete("image")},e.complete&&e.naturalWidth!==0&&e.naturalHeight!==0?x.complete("image"):e.complete&&x.invalid("image")},m=()=>Array.from(o).some(e=>e.hasAttribute("data-src")),c=async()=>{let e=Array.from(o),n=async p=>{l.length=0,e.filter(p).forEach(w=>w.hasAttribute("data-src")?t(w):a(w)),await r.run(l,x.getAbort())};await n(p=>p.hasAttribute("fetchpriority")),await n(p=>!p.hasAttribute("fetchpriority"))},E=e=>{r.download(e,`${window.location.hostname}_image_${Date.now()}`)};return{init:()=>(r=O("image").withForceCache(),o=document.querySelectorAll("img"),o.forEach(x.add),{load:c,download:E,hasDataSrc:m})}})();var z=(()=>{let o='<i class="fa-solid fa-circle-pause spin-button"></i>',r='<i class="fa-solid fa-circle-play"></i>',l=async(d=!0)=>{let t=document.body.getAttribute("data-audio");if(!t){x.complete("audio",!0);return}let a=null;try{a=new Audio(await O("audio").withForceCache().get(t,x.getAbort())),a.loop=!0,a.muted=!1,a.autoplay=!1,a.controls=!1,x.complete("audio")}catch{x.invalid("audio");return}let m=!1,c=document.getElementById("button-music"),E=async()=>{if(!(!navigator.onLine||!c)){c.disabled=!0;try{await a.play(),m=!0,c.disabled=!1,c.innerHTML=o}catch(e){m=!1,C.notify(e).error()}}},h=()=>{m=!1,a.pause(),c.innerHTML=r};document.addEventListener("undangan.open",()=>{c.classList.remove("d-none"),d&&E()}),c.addEventListener("offline",h),c.addEventListener("click",()=>m?h():E())};return{init:()=>(x.add(),{load:l})}})();var G={tab:l=>window.bootstrap.Tab.getOrCreateInstance(document.getElementById(l)),modal:l=>window.bootstrap.Modal.getOrCreateInstance(document.getElementById(l))};var re=o=>{let r="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css",l="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js",i=()=>o.get(r).then(t=>new Promise((a,m)=>{let c=document.createElement("link");c.onload=a,c.onerror=m,c.rel="stylesheet",c.href=t,document.head.appendChild(c)})),d=()=>o.get(l).then(t=>new Promise((a,m)=>{let c=document.createElement("script");c.onload=a,c.onerror=m,c.src=t,document.head.appendChild(c)}));return Promise.all([i(),d()]).then(()=>{if(typeof window.AOS>"u")throw new Error("AOS library failed to load");window.AOS.init()})},se=o=>o.get("https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.js").then(l=>new Promise((i,d)=>{let t=document.createElement("script");t.onerror=d,t.onload=()=>{typeof window.confetti>"u"?d(new Error("Confetti library failed to load")):i()},t.src=l,document.head.appendChild(t)})),ae=o=>{let r=[{css:"https://fonts.googleapis.com/css2?family=Sacramento&display=swap",family:"Sacramento"},{css:"https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic&display=swap",family:"Noto Naskh Arabic"}],l=({css:i,family:d})=>o.get(i).then(t=>new Promise((a,m)=>{let c=document.createElement("link");c.onload=a,c.onerror=m,c.rel="stylesheet",c.href=t,document.head.appendChild(c)})).then(()=>document.fonts.load(`1em "${d}"`));return Promise.all(r.map(l))},V=(o={})=>{let r=[],l=O("libs").withForceCache();return(o?.aos??!0)&&r.push(re(l)),(o?.confetti??!0)&&r.push(se(l)),(o?.additionalFont??!0)&&r.push(ae(l)),Promise.all(r)};var P=o=>{let r=(a=null)=>{let m=JSON.parse(localStorage.getItem(o));return a?m[String(a)]:m},l=(a,m)=>{let c=r();c[String(a)]=m,localStorage.setItem(o,JSON.stringify(c))},i=a=>Object.keys(r()).includes(String(a)),d=a=>{if(!i(a))return;let m=r();delete m[String(a)],localStorage.setItem(o,JSON.stringify(m))},t=()=>localStorage.setItem(o,"{}");return localStorage.getItem(o)||t(),{set:l,get:r,has:i,clear:t,unset:d}};var H=(()=>{let o={"#000000":"#ffffff","#ffffff":"#000000","#212529":"#f8f9fa","#f8f9fa":"#212529"},r=["#ffffff","#f8f9fa"],l=["#000000","#212529"],i=!1,d=null,t=null,a=()=>d.set("active","light"),m=()=>d.set("active","dark"),c=f=>{let y=t.getAttribute("content");t.setAttribute("content",f.some(b=>b===y)?o[y]:y)},E=()=>{a(),document.documentElement.setAttribute("data-bs-theme","light"),c(l)},h=()=>{m(),document.documentElement.setAttribute("data-bs-theme","dark"),c(r)},e=(f=null,y=null)=>{let b=d.get("active")==="dark";return f&&y?b?f:y:b};return{init:()=>{switch(d=P("theme"),t=document.querySelector('meta[name="theme-color"]'),d.has("active")||(window.matchMedia("(prefers-color-scheme: dark)").matches?m():a()),document.documentElement.getAttribute("data-bs-theme")){case"dark":m();break;case"light":a();break;default:i=!0}e()?h():E()},spyTop:()=>{let f=b=>b.filter(S=>S.isIntersecting).forEach(S=>{let s=S.target.classList.contains("bg-white-black")?e(l[0],r[0]):e(l[1],r[1]);t.setAttribute("content",s)}),y=new IntersectionObserver(f,{rootMargin:"0% 0% -95% 0%"});document.querySelectorAll("section").forEach(b=>y.observe(b))},change:()=>e()?E():h(),isDarkMode:e,isAutoMode:()=>i}})();var W=(()=>{let o={id:"ID",en:"US",fr:"FR",de:"DE",es:"ES",zh:"CN",ja:"JP",ko:"KR",ar:"SA",ru:"RU",it:"IT",nl:"NL",pt:"PT",tr:"TR",th:"TH",vi:"VN",ms:"MY",hi:"IN"},r=null,l=null,i=null,d=null;return{on(t,a){return d.set(t,a),this},get(){let t=d.get(i);return d.clear(),t},getCountry(){return r},getLocale(){return l},getLanguage(){return i},setDefault(t){let a=!0;o[t]||(a=!1,console.warn("Language not found, please add manually in countryMapping")),r=a?o[t]:"US",i=a?t:"en",l=`${i}_${r}`},init(){d=new Map,this.setDefault(navigator.language.split("-").shift())}}})();var J=(()=>{let o=({uuid:h,own:e,name:n,presence:p,comment:w,created_at:u,is_admin:f,is_parent:y,gif_url:b,ip:S,user_agent:s,comments:g,like_count:T})=>({uuid:h,own:e,name:n,presence:p,comment:w,created_at:u,is_admin:f??!1,is_parent:y,gif_url:b,ip:S,user_agent:s,comments:g?.map(o)??[],like_count:T??0}),r=h=>h.map(o);return{uuidResponse:({uuid:h})=>({uuid:h}),tokenResponse:({token:h})=>({token:h}),statusResponse:({status:h})=>({status:h}),getCommentResponse:o,getCommentsResponse:r,getCommentsResponseV2:h=>({count:h.count,lists:r(h.lists)}),commentShowMore:(h,e=!1)=>({uuid:h,show:e}),postCommentRequest:(h,e,n,p,w)=>({id:h,name:e,presence:n,comment:p,gif_id:w}),postSessionRequest:(h,e)=>({email:h,password:e}),updateCommentRequest:(h,e,n)=>({presence:h,comment:e,gif_id:n})}})();var K=(()=>{let o=null,r=()=>o.get("token"),l=h=>o.set("token",h),i=h=>I(U,"/api/session").body(h).send(J.tokenResponse).then(e=>(e.code===200&&l(e.data.token),e.code===200)),d=()=>o.unset("token"),t=()=>String(r()??".").split(".").length===3,a=h=>I("GET","/api/v2/config").withCache(1e3*60*30).withForceCache().token(h).send().then(e=>{if(e.code!==200)throw new Error("failed to get config.");let n=P("config");for(let[p,w]of Object.entries(e.data))n.set(p,w);return l(h),e}),m=()=>{if(!t())return null;try{return JSON.parse(C.base64Decode(r().split(".")[1]))}catch{return null}};return{init:()=>{o=P("session")},guest:a,isValid:()=>t()?(m()?.exp??0)>Date.now()/1e3:!1,login:i,logout:d,decode:m,isAdmin:t,setToken:l,getToken:r}})();var X=(()=>{let o=null,r=!0,l=["input[data-offline-disabled]","button[data-offline-disabled]","select[data-offline-disabled]","textarea[data-offline-disabled]"],i=()=>r,d=()=>{let e=o.firstElementChild.firstElementChild;e.classList.remove("bg-success"),e.classList.add("bg-danger"),e.firstElementChild.innerHTML='<i class="fa-solid fa-ban me-2"></i>Koneksi tidak tersedia'},t=()=>{let e=o.firstElementChild.firstElementChild;e.classList.remove("bg-danger"),e.classList.add("bg-success"),e.firstElementChild.innerHTML='<i class="fa-solid fa-cloud me-2"></i>Koneksi tersedia kembali'},a=async()=>{r&&(await C.changeOpacity(o,!1),d())},m=()=>{document.querySelectorAll(l.join(", ")).forEach(e=>{e.dispatchEvent(new Event(i()?"online":"offline")),e.setAttribute("data-offline-disabled",i()?"false":"true"),e.tagName==="BUTTON"?i()?e.classList.remove("disabled"):e.classList.add("disabled"):i()?e.removeAttribute("disabled"):e.setAttribute("disabled","true")})},c=()=>{r=!1,d(),C.changeOpacity(o,!0),m()},E=()=>{r=!0,t(),C.timeOut(a,3e3),m()};return{init:()=>{window.addEventListener("online",E),window.addEventListener("offline",c),o=document.createElement("div"),o.classList.add("fixed-top","pe-none"),o.style.cssText="opacity: 0; z-index: 1057;",o.innerHTML=`
        <div class="d-flex justify-content-center mx-auto">
            <div class="d-flex justify-content-center align-items-center rounded-pill my-2 bg-danger shadow">
                <small class="text-center py-1 px-2 mx-1 mt-1 mb-0 text-white" style="font-size: 0.8rem;"></small>
            </div>
        </div>`,document.body.insertBefore(o,document.body.lastChild)},isOnline:i}})();var Y=()=>window.confetti.shapeFromPath({path:"M167 72c19,-38 37,-56 75,-56 42,0 76,33 76,75 0,76 -76,151 -151,227 -76,-76 -151,-151 -151,-227 0,-42 33,-75 75,-75 38,0 57,18 76,56z",matrix:[.03333333333333333,0,0,.03333333333333333,-5.566666666666666,-5.533333333333333]}),Z=()=>{window.confetti&&window.confetti({origin:{y:1},zIndex:1057})},Q=(o=15)=>{if(!window.confetti)return;let r=o*1e3,l=Date.now()+r,i=Y(),d=["#FFC0CB","#FF1493","#C71585"],t=(m,c)=>Math.random()*(c-m)+m,a=()=>{let m=l-Date.now();d.forEach(c=>{window.confetti({particleCount:1,startVelocity:0,ticks:Math.max(50,75*(m/r)),origin:{x:Math.random(),y:Math.abs(Math.random()-m/r)},zIndex:1057,colors:[c],shapes:[i],drift:t(-.5,.5),gravity:t(.5,1),scalar:t(.5,1)})}),m>0&&requestAnimationFrame(a)};requestAnimationFrame(a)},ee=(o,r=50)=>{if(!window.confetti)return;let l=Date.now()+r,i=o.getBoundingClientRect(),d=Math.max(.3,Math.min(1,i.top/window.innerHeight+.2)),t=Y(),a=["#FF69B4","#FF1493"],m=()=>{a.forEach(c=>{window.confetti({particleCount:2,angle:60,spread:55,shapes:[t],origin:{x:i.left/window.innerWidth,y:d},zIndex:1057,colors:[c]}),window.confetti({particleCount:2,angle:120,spread:55,shapes:[t],origin:{x:i.right/window.innerWidth,y:d},zIndex:1057,colors:[c]})}),Date.now()<l&&requestAnimationFrame(m)};requestAnimationFrame(m)};var te=(()=>{let o=null,r=null,l=()=>{document.getElementById("comment")?.remove(),document.getElementById("comments")?.remove(),document.querySelector('a.nav-link[href="#comment"]')?.closest("li.nav-item")?.remove(),document.querySelector('a.nav-link[href="#comments"]')?.closest("li.nav-item")?.remove()},i=()=>{let e=new Date(document.body.getAttribute("data-time").replace(" ","T")).getTime(),n=b=>b<10?`0${b}`:`${b}`,p=document.getElementById("day"),w=document.getElementById("hour"),u=document.getElementById("minute"),f=document.getElementById("second"),y=()=>{let b=Math.abs(e-Date.now());p.textContent=n(Math.floor(b/864e5)),w.textContent=n(Math.floor(b%864e5/36e5)),u.textContent=n(Math.floor(b%36e5/6e4)),f.textContent=n(Math.floor(b%6e4/1e3)),C.timeOut(y,1e3-Date.now()%1e3)};C.timeOut(y)},d=()=>{let e=window.location.search.split("to="),n=null;if(e.length>1&&e[1].length>=1&&(n=window.decodeURIComponent(e[1])),n){let w=document.getElementById("guest-name"),u=document.createElement("div");u.classList.add("m-2");let f=`
                <small>${C.escapeHtml(w?.getAttribute("data-message"))}</small>
                <p style="font-size:1.25rem">${C.escapeHtml(n)}</p>
            `;C.safeInnerHTML(u,f),w?.appendChild(u)}let p=document.getElementById("form-name");p&&(p.value=o.get("name")??n)},t=e=>{e.disabled=!0,document.body.scrollIntoView({behavior:"instant"}),document.getElementById("root").classList.remove("opacity-0"),H.isAutoMode()&&document.getElementById("button-theme").classList.remove("d-none"),Z(),C.timeOut(Q,1500),document.dispatchEvent(new Event("undangan.open")),C.changeOpacity(document.getElementById("welcome"),!1).then(n=>n.remove())},a=e=>{document.getElementById("button-modal-click").href=e.src,document.getElementById("button-modal-download").dataset.src=e.src;let n=document.getElementById("show-modal-image");n.src=e.src,n.width=e.width,n.height=e.height,G.modal("modal-image").show()},m=e=>{navigator.vibrate&&navigator.vibrate(500),ee(e,100),C.changeOpacity(e,!1).then(n=>n.remove())},c=async()=>{l(),d(),await C.changeOpacity(document.getElementById("welcome"),!0),await C.changeOpacity(document.getElementById("loading"),!1).then(e=>e.remove())},E=()=>{W.init(),X.init(),x.init(),l(),r=P("config"),o=P("information");let e=q.init(),n=j.init(),p=z.init(),w=V();document.addEventListener("undangan.progress.done",c),document.getElementById("button-modal-download").addEventListener("click",u=>n.download(u.currentTarget.dataset.src)),e.load(),n.load(),p.load(),w({confetti:document.body.getAttribute("data-confetti")==="true"}).then(()=>x.complete("libs")).catch(()=>x.invalid("libs"))};return{init:()=>{H.init(),K.init();try{P("comment")?.clear(),localStorage.removeItem("comment")}catch{}return window.addEventListener("load",()=>{B.init(E,["image","video","audio","libs","gif"])}),{util:C,theme:H,guest:{open:t,modal:a,showStory:m}}}}})();(o=>{o.undangan=te.init()})(window);})();
